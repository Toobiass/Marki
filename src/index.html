<!DOCTYPE html>
<html>

<head>
    <style>
        :root {
            --bg-editor: #1e1e1e;
            --text-muted: #858585;
            --accent: #007acc;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-editor);
            color: var(--text-muted);
            height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            user-select: none;
        }

        .hint {
            font-size: 14px;
            opacity: 0.6;
            transition: opacity 0.3s;
        }

        .hint b {
            color: var(--accent);
            background: #252526;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: normal;
        }

        #status {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 22px;
            background: var(--accent);
            color: white;
            font-size: 12px;
            display: flex;
            align-items: center;
            padding: 0 10px;
            transform: translateY(100%);
            transition: transform 0.2s;
        }

        #status.visible {
            transform: translateY(0);
        }
    </style>
</head>

<body>
    <div class="hint" id="welcome-hint">
        Drücke <b>Strg + P</b> um den Speicherort festzulegen
    </div>

    <div id="status">
        Speicherort: <span id="current-path" style="margin-left: 5px; opacity: 0.9;"></span>
    </div>

    <script>
        const status = document.getElementById('status');
        const pathSpan = document.getElementById('current-path');
        const hint = document.getElementById('welcome-hint');

        document.addEventListener('keydown', async (e) => {
            // Strg + P abfangen
            if (e.ctrlKey && e.key.toLowerCase() === 'p') {
                e.preventDefault(); // Standard Druck-Dialog verhindern

                const filePath = await window.electronAPI.selectFolder();
                if (filePath) {
                    pathSpan.innerText = filePath;
                    status.classList.add('visible');
                    hint.style.opacity = '0.2';

                    // Speicherpfad im LocalStorage merken
                    localStorage.setItem('marki-path', filePath);
                    console.log("Speicherort gesetzt auf:", filePath);
                }
            }
            if (e.ctrlKey && e.key.toLowerCase() === 'i') {
                //show info page with all commands and what they do
            }
        });

        // Beim Start prüfen ob schon ein Pfad gespeichert war
        window.onload = () => {
            const savedPath = localStorage.getItem('marki-path');
            if (savedPath) {
                pathSpan.innerText = savedPath;
                status.classList.add('visible');
                hint.style.opacity = '0.2';
            }
        }
    </script>
</body>

</html>